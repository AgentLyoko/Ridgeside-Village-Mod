{
	"Changes": [

		//Load images
		{
			"Action": "Load",
			"Target": "LooseSprites/PikaShop",
			"FromFile": "Assets/LooseSprites/PikaShop.png"
		},

	//=======================
	//Apply shop tiles
	//=======================

		//Jeric's Shop
		{
			"Action": "EditMap",
			"Target": "Maps/Custom_Ridgeside_JericHouse",
			"MapTiles": [
				{
					"Position": { "X": 1, "Y": 14 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVJericShop none 600 2400"
					}
				},
				{
					"Position": { "X": 2, "Y": 14 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVJericShop none 600 2400"
					}
				},
				{
					"Position": { "X": 3, "Y": 14 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVJericShop none 600 2400"
					}
				},
				{
					"Position": { "X": 3, "Y": 13 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVJericShop none 600 2400"
					}
				},
				{
					"Position": { "X": 3, "Y": 12 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVJericShop none 600 2400"
					}
				},
			],
		},

		//Pika's Resto
		//Opening
		{
			"Action": "EditMap",
			"Target": "Maps/Custom_Ridgeside_RidgesideVillage",
			"MapTiles": [
				{
					"Position": { "X": 98, "Y": 39 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVPikaShop down 930 2300"
					}
				},
				{
					"Position": { "X": 99, "Y": 39 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVPikaShop down 930 2300"
					}
				},
			],
			"When": {
				"Weather": "Sun, Wind",
			},
			"Update": "OnLocationChange"	
		},
		//Closing
		{
			"Action": "EditMap",
			"Target": "Maps/Custom_Ridgeside_RidgesideVillage",
			"MapTiles": [
				{
					"Position": { "X": 98, "Y": 39 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "Message \"rsv.close\""
					}
				},
				{
					"Position": { "X": 99, "Y": 39 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "Message \"rsv.close\""
					}
				},
			],
			"When": {
				"Weather": "Rain, Storm, Snow"
			},
			"Update": "OnLocationChange, OnTimeChange"	
		},

		//Pika's Recipes
		//Opening
		{
			"Action": "EditMap",
			"Target": "Maps/Custom_Ridgeside_RidgesideVillage",
			"MapTiles": [
				{
					"Position": { "X": 90, "Y": 39 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVPikaRecipes down 930 2300"
					}
				},
				{
					"Position": { "X": 91, "Y": 39 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "OpenShop RSVPikaRecipes down 930 2300"
					}
				},
			],
			"When": {
				"Weather": "Sun, Wind",
				"Time": "{{Range: 0930, 2300}}"
			},
			"Update": "OnLocationChange"	
		},
		//Closing
		{
			"Action": "EditMap",
			"Target": "Maps/Custom_Ridgeside_RidgesideVillage",
			"MapTiles": [
				{
					"Position": { "X": 90, "Y": 39 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "Message \"rsv.close\""
					}
				},
				{
					"Position": { "X": 91, "Y": 39 },
					"Layer": "Buildings",
					"SetProperties": {
						"Action": "Message \"rsv.close\""
					}
				},
			],
			"When": {
				"Weather": "Rain, Storm, Snow"
			},
			"Update": "OnLocationChange"	
		},

	//=======================
	//Shop Data
	//=======================
		{
			"Action": "EditData",
			"Target": "Data/Shops",
			"Entries": {

				//Jeric Shop
				//Still missing compat with PPJA
				"RSVJericShop": {
					"Owners": [
						{
							"Name": "Jeric",
							"Dialogues": [
								{
									"Id": "RSVJericShop_Default",
									"Dialogue": "{{i18n:RSVJericShop}}"
								}
							],
							"ClosedMessage": "{{i18n:RSVJericShop.close}}"
						}
					],
					"PriceModifiers": [
						{
							"Modification": "Multiply",
							"Amount": 0.7
						},
						{
							"Modification": "Multiply",
							"Amount": 0.6,
							"Condition": "PLAYER_FRIENDSHIP_POINTS Current Jeric 2000"
						},		
					],
					"SalableItemTags": [
						"category_fertilizer",
						"category_seeds"
					],

					"Items": [

						//Spring
						{
							"RandomItemId": [
								"(O)474",
								"(O)476",
								"(O)472",
								"(O)473",
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON spring",
						},
						{
							"RandomItemId": [
								"(O)474",
								"(O)476",
								"(O)472",
								"(O)473",
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON spring",
						},
						{
							"RandomItemId": [
								"(O)474",
								"(O)476",
								"(O)472",
								"(O)473",
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON spring",
						},
						{
							"ItemId": "(O)745",
							"AvailableStock": 9,
							"Condition": "PLAYER_FRIENDSHIP_POINTS Current Jeric 2000, SEASON spring"
						},

						//Summer
						{
							"RandomItemId": [
								"(O)487",
								"(O)482",
								"(O)479",
								"(O)485",
								"(O)480"
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON summer",
						},
						{
							"RandomItemId": [
								"(O)487",
								"(O)482",
								"(O)479",
								"(O)485",
								"(O)480"
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON summer",
						},
						{
							"RandomItemId": [
								"(O)487",
								"(O)482",
								"(O)479",
								"(O)485",
								"(O)480"
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON summer",
						},
						{
							"ItemId": "(O)485",
							"AvailableStock": 9,
							"Condition": "PLAYER_FRIENDSHIP_POINTS Current Jeric 2000, SEASON summer"
						},

						//Fall
						{
							"RandomItemId": [
								"(O)492",
								"(O)491",
								"(O)488",
								"(O)490",
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON fall",
						},
						{
							"RandomItemId": [
								"(O)492",
								"(O)491",
								"(O)488",
								"(O)490",
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON fall",
						},
						{
							"RandomItemId": [
								"(O)492",
								"(O)491",
								"(O)488",
								"(O)490",
							],
							"AvailableStock": 9,
							"AvoidRepeat": true,
							"Condition": "SEASON fall",
						},

						//Winter
						{
							"ItemId": "(O)770",
							"AvailableStock": 9,
							"Condition": "SEASON winter"
						},
					],
				},


				//Pika's Shop
				"RSVPikaShop": {
					"Owners": [
						{
							"Name": "AnyOrNone",
							"Portrait": "LooseSprites/PikaShop",
							"Dialogues": [
								{
									"Id": "RSVPikaShop_Default",
									"Dialogue": "{{i18n:RSVPikaShop}}"
								}
							],
							"ClosedMessage": "{{i18n:RSVPikaShop.close}}"
						}
					],
					"PriceModifiers": [
						{
							"Modification": "Multiply",
							"Amount": 0.7
						},
						{
							"Modification": "Multiply",
							"Amount": 0.6,
							"Condition": "PLAYER_FRIENDSHIP_POINTS Current Pika 2000"
						},		
					],
					"SalableItemTags": [
						"category_cooking",
						"category_ingredients",
						"category_artisan_goods",
						"category_syrup", 
						"category_vegetable", 
						"category_fruits"
					],

					"Items": [
						//Seasonal Dishes
						{
							"ItemId": "(O)Rafseazz.RSVCP_Springtime_Primetime",
							"AvailableStock": 1,
							"Condition": "SEASON spring, PLAYER_HAS_MAIL Current RSV.PikaSpring"
						},
						{
							"ItemId": "(O)Rafseazz.RSVCP_Summer_Mountain_Blessing",
							"AvailableStock": 1,
							"Condition": "SEASON summer, PLAYER_HAS_MAIL Current RSV.PikaSummer"
						},
						{
							"ItemId": "(O)Rafseazz.RSVCP_Autumnal_Serenity",
							"AvailableStock": 1,
							"Condition": "SEASON fall, PLAYER_HAS_MAIL Current RSV.PikaFall"
						},
						{
							"ItemId": "(O)Rafseazz.RSVCP_Winter_Night_Feast",
							"AvailableStock": 1,
							"Condition": "SEASON winter, PLAYER_HAS_MAIL Current RSV.PikaWinter"
						},

						//Dishes
						{
							"RandomItemId": [
								"(O)Rafseazz.RSVCP_Arugula_Roll",
								"(O)Rafseazz.RSVCP_Autumn_Dew_Drop_Juice", 
						        "(O)Rafseazz.RSVCP_Cherry_Berry_Shakey",
								"(O)Rafseazz.RSVCP_Fried_Fish_a_la_Ridge",
								"(O)Rafseazz.RSVCP_Fried_Mountain_Greens",
						        "(O)Rafseazz.RSVCP_Ginger_Arugula_Fried_Rice",
								"(O)Rafseazz.RSVCP_Highland_Ice_Cream",
						        "(O)Rafseazz.RSVCP_Honey_Ginger_Whitefish",
								"(O)Rafseazz.RSVCP_Honey_Glazed_Salad",
								"(O)Rafseazz.RSVCP_Ridge_Fruity_Plate",
						        "(O)Rafseazz.RSVCP_Ridgeside_Shaketini",
								"(O)Rafseazz.RSVCP_Snow_Bowl_Surprise",
						        "(O)Rafseazz.RSVCP_Snowball_Slurpee",
								"(O)Rafseazz.RSVCP_Zesty_Tuna",
							],
							"AvoidRepeat": true,
							"AvailableStock": 1,
						},
						{
							"RandomItemId": [
								"(O)Rafseazz.RSVCP_Arugula_Roll",
								"(O)Rafseazz.RSVCP_Autumn_Dew_Drop_Juice", 
						        "(O)Rafseazz.RSVCP_Cherry_Berry_Shakey",
								"(O)Rafseazz.RSVCP_Fried_Fish_a_la_Ridge",
								"(O)Rafseazz.RSVCP_Fried_Mountain_Greens",
						        "(O)Rafseazz.RSVCP_Ginger_Arugula_Fried_Rice",
								"(O)Rafseazz.RSVCP_Highland_Ice_Cream",
						        "(O)Rafseazz.RSVCP_Honey_Ginger_Whitefish",
								"(O)Rafseazz.RSVCP_Honey_Glazed_Salad",
								"(O)Rafseazz.RSVCP_Ridge_Fruity_Plate",
						        "(O)Rafseazz.RSVCP_Ridgeside_Shaketini",
								"(O)Rafseazz.RSVCP_Snow_Bowl_Surprise",
						        "(O)Rafseazz.RSVCP_Snowball_Slurpee",
								"(O)Rafseazz.RSVCP_Zesty_Tuna",
							],
							"AvoidRepeat": true,
							"AvailableStock": 1,
						},
						{
							"RandomItemId": [
								"(O)Rafseazz.RSVCP_Arugula_Roll",
								"(O)Rafseazz.RSVCP_Autumn_Dew_Drop_Juice", 
						        "(O)Rafseazz.RSVCP_Cherry_Berry_Shakey",
								"(O)Rafseazz.RSVCP_Fried_Fish_a_la_Ridge",
								"(O)Rafseazz.RSVCP_Fried_Mountain_Greens",
						        "(O)Rafseazz.RSVCP_Ginger_Arugula_Fried_Rice",
								"(O)Rafseazz.RSVCP_Highland_Ice_Cream",
						        "(O)Rafseazz.RSVCP_Honey_Ginger_Whitefish",
								"(O)Rafseazz.RSVCP_Honey_Glazed_Salad",
								"(O)Rafseazz.RSVCP_Ridge_Fruity_Plate",
						        "(O)Rafseazz.RSVCP_Ridgeside_Shaketini",
								"(O)Rafseazz.RSVCP_Snow_Bowl_Surprise",
						        "(O)Rafseazz.RSVCP_Snowball_Slurpee",
								"(O)Rafseazz.RSVCP_Zesty_Tuna",
							],
							"AvoidRepeat": true,
							"AvailableStock": 1,
						},
						{
							"RandomItemId": [
								"(O)Rafseazz.RSVCP_Arugula_Roll",
								"(O)Rafseazz.RSVCP_Autumn_Dew_Drop_Juice", 
						        "(O)Rafseazz.RSVCP_Cherry_Berry_Shakey",
								"(O)Rafseazz.RSVCP_Fried_Fish_a_la_Ridge",
								"(O)Rafseazz.RSVCP_Fried_Mountain_Greens",
						        "(O)Rafseazz.RSVCP_Ginger_Arugula_Fried_Rice",
								"(O)Rafseazz.RSVCP_Highland_Ice_Cream",
						        "(O)Rafseazz.RSVCP_Honey_Ginger_Whitefish",
								"(O)Rafseazz.RSVCP_Honey_Glazed_Salad",
								"(O)Rafseazz.RSVCP_Ridge_Fruity_Plate",
						        "(O)Rafseazz.RSVCP_Ridgeside_Shaketini",
								"(O)Rafseazz.RSVCP_Snow_Bowl_Surprise",
						        "(O)Rafseazz.RSVCP_Snowball_Slurpee",
								"(O)Rafseazz.RSVCP_Zesty_Tuna",
							],
							"AvoidRepeat": true,
							"AvailableStock": 1,
						},
						{
							"RandomItemId": [
								"(O)Rafseazz.RSVCP_Arugula_Roll",
								"(O)Rafseazz.RSVCP_Autumn_Dew_Drop_Juice", 
						        "(O)Rafseazz.RSVCP_Cherry_Berry_Shakey",
								"(O)Rafseazz.RSVCP_Fried_Fish_a_la_Ridge",
								"(O)Rafseazz.RSVCP_Fried_Mountain_Greens",
						        "(O)Rafseazz.RSVCP_Ginger_Arugula_Fried_Rice",
								"(O)Rafseazz.RSVCP_Highland_Ice_Cream",
						        "(O)Rafseazz.RSVCP_Honey_Ginger_Whitefish",
								"(O)Rafseazz.RSVCP_Honey_Glazed_Salad",
								"(O)Rafseazz.RSVCP_Ridge_Fruity_Plate",
						        "(O)Rafseazz.RSVCP_Ridgeside_Shaketini",
								"(O)Rafseazz.RSVCP_Snow_Bowl_Surprise",
						        "(O)Rafseazz.RSVCP_Snowball_Slurpee",
								"(O)Rafseazz.RSVCP_Zesty_Tuna",
							],
							"AvoidRepeat": true,
							"AvailableStock": 1,
						},
						{
							"RandomItemId": [
								"(O)Rafseazz.RSVCP_Arugula_Roll",
								"(O)Rafseazz.RSVCP_Autumn_Dew_Drop_Juice", 
						        "(O)Rafseazz.RSVCP_Cherry_Berry_Shakey",
								"(O)Rafseazz.RSVCP_Fried_Fish_a_la_Ridge",
								"(O)Rafseazz.RSVCP_Fried_Mountain_Greens",
						        "(O)Rafseazz.RSVCP_Ginger_Arugula_Fried_Rice",
								"(O)Rafseazz.RSVCP_Highland_Ice_Cream",
						        "(O)Rafseazz.RSVCP_Honey_Ginger_Whitefish",
								"(O)Rafseazz.RSVCP_Honey_Glazed_Salad",
								"(O)Rafseazz.RSVCP_Ridge_Fruity_Plate",
						        "(O)Rafseazz.RSVCP_Ridgeside_Shaketini",
								"(O)Rafseazz.RSVCP_Snow_Bowl_Surprise",
						        "(O)Rafseazz.RSVCP_Snowball_Slurpee",
								"(O)Rafseazz.RSVCP_Zesty_Tuna",
							],
							"AvoidRepeat": true,
							"AvailableStock": 1,
						},
						{
							"RandomItemId": [
								"(O)207",
								"(O)611",
								"(O)648",
								"(O)240",
								"(O)213",
								"(O)204",
								"(O)195",
								"(O)215",
								"(O)236",
								"(O)196",
								"(O)224",
								"(O)606",
								"(O)218",
							],
							"AvoidRepeat": true,
							"AvailableStock": 1,
						},
						{
							"RandomItemId": [
								"(O)207",
								"(O)611",
								"(O)648",
								"(O)240",
								"(O)213",
								"(O)204",
								"(O)195",
								"(O)215",
								"(O)236",
								"(O)196",
								"(O)224",
								"(O)606",
								"(O)218",
							],
							"AvoidRepeat": true,
							"AvailableStock": 1,
						},
					]
				},

				//Pika's Shop
				"RSVPikaRecipes": {
					"Owners": [
						{
							"Name": "AnyOrNone",
							"Portrait": "LooseSprites/PikaShop",
							"Dialogues": [
								{
									"Id": "RSVPikaRecipes_Default",
									"Dialogue": "{{i18n:RSVPikaRecipes}}"
								}
							],
							"ClosedMessage": "{{i18n:RSVPikaRecipes.close}}"
						}
					],
					"PriceModifiers": [
						{
							"Modification": "Multiply",
							"Amount": 0.6
						},
						{
							"Modification": "Multiply",
							"Amount": 0.5,
							"Condition": "PLAYER_FRIENDSHIP_POINTS Current Pika 2000"
						},		
					],

					"Items": [
						//Unlockable Recipes
						{
							"Id": "Rafseazz.RSVCP_Springtime_Primetime (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Springtime_Primetime",
							"IsRecipe": true,
							"Condition": "PLAYER_HAS_MAIL Current RSV.PikaSpring"
						},
						{
							"Id": "Rafseazz.RSVCP_Summer_Mountain_Blessing (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Summer_Mountain_Blessing",
							"IsRecipe": true,
							"Condition": "PLAYER_HAS_MAIL Current RSV.PikaSummer"
						},
						{
							"Id": "Rafseazz.RSVCP_Autumnal_Serenity (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Autumnal_Serenity",
							"IsRecipe": true,
							"Condition": "PLAYER_HAS_MAIL Current RSV.PikaFall"
						},
						{
							"Id": "Rafseazz.RSVCP_Winter_Night_Feast (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Winter_Night_Feast",
							"IsRecipe": true,
							"Condition": "PLAYER_HAS_MAIL Current RSV.PikaWinter"
						},

						//Recipes
						{
							"Id": "Rafseazz.RSVCP_Arugula_Roll (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Arugula_Roll",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Autumn_Dew_Drop_Juice (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Autumn_Dew_Drop_Juice",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Cherry_Berry_Shakey (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Cherry_Berry_Shakey",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Fried_Fish_a_la_Ridge (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Fried_Fish_a_la_Ridge",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Fried_Fish_a_la_Ridge (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Fried_Fish_a_la_Ridge",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Fried_Mountain_Greens (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Fried_Mountain_Greens",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Ginger_Arugula_Fried_Rice (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Ginger_Arugula_Fried_Rice",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Highland_Ice_Cream (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Highland_Ice_Cream",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Honey_Ginger_Whitefish (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Honey_Ginger_Whitefish",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Honey_Glazed_Salad (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Honey_Glazed_Salad",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Ridge_Fruity_Plate (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Ridge_Fruity_Plate",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Ridgeside_Shaketini (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Ridgeside_Shaketini",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Snow_Bowl_Surprise (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Snow_Bowl_Surprise",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Snowball_Slurpee (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Snowball_Slurpee",
							"IsRecipe": true,
						},
						{
							"Id": "Rafseazz.RSVCP_Zesty_Tuna (Recipe)",
							"ItemId": "(O)Rafseazz.RSVCP_Zesty_Tuna",
							"IsRecipe": true,
						},
					]
				},

				//
			}
		}
	]
}